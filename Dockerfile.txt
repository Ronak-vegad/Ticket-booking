# Use Go 1.25.3 (or newer)
FROM golang:1.25.3

# Set working directory inside container
WORKDIR /app

# Copy go.mod and go.sum first to cache dependencies
COPY go.mod go.sum ./
RUN go mod download

# Copy the rest of your source code
COPY . .

# Build the binary
RUN go build -o app .

# Expose port (Render assigns $PORT dynamically)
EXPOSE 8080

# Run your Go app
CMD ["./app"]
